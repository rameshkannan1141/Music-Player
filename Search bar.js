




let contents = [["love today.jpg","Ennai Vittu","Sid Sriram","Love Today","1","Ennai-Vittu-MassTamilan.dev.mp3"],
["love today.jpg","Pacha Elai","Mathichiyam Bala","Love Today","2","Pacha-Elai-MassTamilan.dev.mp3"],
["love today.jpg","Saachittale","Yuvanshankar Raja","Love Today","3","Saachitale-MassTamilan.dev.mp3"],
["love today.jpg","MaamaKuttyyyy","Yuvanshankar Raja","Love Today","4","Mamakutty-MassTamilan.dev.mp3"],
["love today.jpg","Ennai Vittu ( U! version )","Yuvanshankar Raja","Love Today","5","Ennai-Vittu-(Yuvanshankar-Raja-Version)-MassTamilan.dev.mp3"],

["Vikram.jpg","Pathala Pathala","Anirudh Ravichander","Vikram","6","Pathala-Pathala-MassTamilan.so.mp3"],
["Vikram.jpg","Vikram (Tittle Track)","Anirudh Ravichander","Vikram","7","Vikram-Title-Track-MassTamilan.so.mp3"],
["Vikram.jpg","Wasted","Anirudh Ravichander","Vikram","8","Wasted-MassTamilan.so.mp3"],
["Vikram.jpg","Porkanda Singam","Anirudh Ravichander","Vikram","9","Porkanda-Singam-MassTamilan.so.mp3"],
["Vikram.jpg","Once Upon a Time","Anirudh Ravichander","Vikram","10","Once-Upon-a-Time-MassTamilan.so.mp3"],

["Naane Varuven.jpg","Veera Soora","Yuvanshankar Raja","Naane Varuven","11","Veera Soora.mp3"],
["Naane Varuven.jpg","Rendu Raaja","Dhanush","Naane Varuven","12","Rendu-Raaja-MassTamilan.dev.mp3"],
["Naane Varuven.jpg","Pinju Pinju Mazhai","Sid Sriram","Naane Varuven","13","Pinju-Pinju-Mazhai-MassTamilan.dev.mp3"],
["Naane Varuven.jpg","Yarum Illa","Anthony Daasan","Naane Varuven","14","Yaarum-Illa-MassTamilan.dev.mp3"],

["Mahan.jpg","Soorayattam","Santhosh Narayanan","Mahan","15","Soorayaatam-MassTamilan.fm.mp3"],
["Mahan.jpg","Pona Povura","Santhosh Narayanan","Mahan","16","Pona-Povura-MassTamilan.fm.mp3"],
["Mahan.jpg","Rich Rich","Santhosh Narayanan","Mahan","17","Rich-Rich-MassTamilan.fm.mp3"],
["Mahan.jpg","Evanda Enakku Coustody","Santhosh Narayanan","Mahan","18","Evanda-Enakku-Custody-MassTamilan.fm.mp3"],
["Mahan.jpg","Missing Me","Santhosh Narayanan","Mahan","19","Missing-Me-MassTamilan.fm.mp3"],
["Mahan.jpg","Naan Naan","Santhosh Narayanan","Mahan","20","Naan-Naan-MassTamilan.fm.mp3"],
["Mahan.jpg","Umm Song(Tamil)","Santhosh Narayanan","Mahan","21","Umm-Song-MassTamilan.fm.mp3"],

["Manadu.jpg","Meherazylaa","YuvanShankar raja","Manadu","22","Meherezylaa-MassTamilan.fm.mp3"],
["Manadu.jpg","Voice of Unity","YuvanShankar raja","Manadu","23","Voice-Of-Unity-MassTamilan.fm.mp3"],
["Manadu.jpg","Dhanush Kodi's Theme","YuvanShankar raja","Manadu","24","Dhanush-Kodi's-Theme-MassTamilan.fm.mp3"],
["Manadu.jpg","Maanaadu Theme","YuvanShankar raja","Manadu","25","Maanaadu-Theme-MassTamilan.fm.mp3"],
["Manadu.jpg","A walk in the fire - Theme","YuvanShankar raja","Manadu","26","A-walk-in-the-fire---Theme-MassTamilan.fm.mp3"],
["Manadu.jpg","Dead End - Theme","YuvanShankar raja","Manadu","27","Dead-End---Theme-MassTamilan.fm.mp3"],
["Manadu.jpg","Follow my lead - Theme","YuvanShankar raja","Manadu","28","Follow-my-lead---Theme-MassTamilan.fm.mp3"],

["Three.jpg","Neepartha Vizhigal","Anirudh Ravichanthar","Three","29","Nee-Partha.mp3"],
["Three.jpg","Kannazhaaga","Anirudh Ravichanthar","Three","30","Kannazhaga.mp3"],
["Three.jpg","A Life Full of Love","Anirudh Ravichanthar","Three","31","A-life-Full-of-love.mp3"],
["Three.jpg","Idhazin Oram","Anirudh Ravichanthar","Three","32","Idhazhin-Oram.mp3"],
["Three.jpg","Theam Of Love","Anirudh Ravichanthar","Three","33","The-Rhythem-of-love.mp3"],
["Three.jpg","Come of Girls","Anirudh Ravichanthar","Three","34","Come-on-Girls.mp3"],
["Three.jpg","Why This Kolaveri","Anirudh Ravichanthar","Three","35","Why-this-kolaveri-di.mp3"],

["Doctor.jpg","Chellamma","Anirudh Ravichanthar","Doctor","36","Chellamma-MassTamilan.fm.mp3"],
["Doctor.jpg","Nenjame","Anirudh Ravichanthar","Doctor","37","Nenjame-MassTamilan.fm.mp3"],
["Doctor.jpg","So Baby","Anirudh Ravichanthar","Doctor","38","So-Baby-MassTamilan.fm.mp3"],
["Doctor.jpg","Soul of Doctor (Theme)","Anirudh Ravichanthar","Doctor","39","Soul-of-Doctor-(Theme)-MassTamilan.fm.mp3"],

["Ponniyin Selvan.jpg","Ponni Nadhi","A. R. Rahman","Ponniyin Selvan","40","Ponni-Nadhi-MassTamilan.dev.mp3"],
["Ponniyin Selvan.jpg","Chola Chola","A. R. Rahman","Ponniyin Selvan","41","Chola-Chola-MassTamilan.dev.mp3"],
["Ponniyin Selvan.jpg","Alaikadal","A. R. Rahman","Ponniyin Selvan","42","Alaikadal-MassTamilan.dev.mp3"],
["Ponniyin Selvan.jpg","Sol","A. R. Rahman","Ponniyin Selvan","43","Sol-MassTamilan.dev.mp3"],
["Ponniyin Selvan.jpg","Devaralan Attam","A. R. Rahman","Ponniyin Selvan","44","Devaralan-Aattam-MassTamilan.dev.mp3"],
["Ponniyin Selvan.jpg","Ratchasa Maamaney","A. R. Rahman","Ponniyin Selvan","45","Ratchasa-Maamaney-MassTamilan.dev.mp3"],

["VTK.jpg","Muthu's Journey","A. R. Rahman","VTK","46","Muthu's-Journey-MassTamilan.dev.mp3"],
["VTK.jpg","Kaalathukkum Nee Venum","A. R. Rahman","VTK","47","Kaalathukkum-Nee-Venum-MassTamilan.dev.mp3"],
["VTK.jpg","Marakkuma Nenjam","A. R. Rahman","VTK","48","Marakkuma-Nenjam-MassTamilan.dev.mp3"],
["VTK.jpg","Unna Nenachadhum","A. R. Rahman","VTK","49","Unna-Nenachadhum-MassTamilan.dev.mp3"],
["VTK.jpg","Mallipoo","A. R. Rahman","VTK","50","Mallipoo-MassTamilan.dev.mp3"],

["Meesaya Murukku.jpg","Meesaya Murukku","HipHop Tamizha","Meesaya Murukku","51","Meesaya-Murukku-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Vaadi Nee Va","HipHop Tamizha","Meesaya Murukku","52","Vaadi-Nee-Vaadi-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Maatikichu","HipHop Tamizha","Meesaya Murukku","53","Maattikkichey-Maattikkichey-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Machi Engalukku Ellam","HipHop Tamizha","Meesaya Murukku","54","Machi-Engalukku-Ellam-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Enna Nadanthalum","HipHop Tamizha","Meesaya Murukku","55","Enna-Nadanthalum-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Sakkarakatti","HipHop Tamizha","Meesaya Murukku","56","Adiye-Sakkarakatti-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Sait Ji","HipHop Tamizha","Meesaya Murukku","57","Saitji-Saitji-MassTamilan.com.mp3"],
["Meesaya Murukku.jpg","Vaadi Pulla Vaadi","HipHop Tamizha","Meesaya Murukku","58","Vaadi-Pulla-Vaadi--From-Meesaya-Murukku--Hiphop-Tamizha.mp3"],

];





// top movie selaction div..............


const MOVIE_NAME_SEARCH =document.querySelector(".Movie-Name-Search");
let store_MovieName;


let movie_Name_Search =(function(movieName){
return ` <button type="button" class="Movie-Name" onclick="movieBtn_Click(this)" >${movieName}</button>`;
})

let create_MovieName_Divs = function(){
store_MovieName = "";

contents.forEach(function(movie_Name){
if(!store_MovieName.includes(movie_Name[3])){
store_MovieName += movie_Name_Search(movie_Name[3]);

}

});
MOVIE_NAME_SEARCH.innerHTML += store_MovieName;

}


let store_ClickMovie_names; 

function movieBtn_Click(value){
// console.log(value.innerText);

store_ClickMovie_names="";


contents.forEach(function(con_Arr){
if(value.innerText==con_Arr[3]){
store_ClickMovie_names += listenAgain_Div(con_Arr[0],con_Arr[1],con_Arr[4]);
}

});

LISTEN_AGAIN.innerHTML = store_ClickMovie_names ;

}





// selection songs div...........


const LISTEN_AGAIN = document.querySelector(".listen-again");  
let store_listenAgain_Div;

let listenAgain_Div = (function(img_source,song_name,id){

return ` <div class="la-inner-div" onclick = "song_Click(this)" id="${id}">
<img src="${img_source}" >
<p>${song_name}</p>
</div>`
})

let create_listenAgain_div = function(){
store_listenAgain_Div ="";

contents.forEach(function(con_Arr){
if(!store_listenAgain_Div.includes(con_Arr[0])){
store_listenAgain_Div += listenAgain_Div(con_Arr[0],con_Arr[1],con_Arr[4]);
}

});

LISTEN_AGAIN.innerHTML = store_listenAgain_Div;

};




//All songs............

const SONGS_COLLECTION = document.querySelector(".songs-collectons");
let store_SongsDiv;

let song_Div = (function(img_source,song_name,singer_name,id){ 
return   `<div class="song-wrapper" onclick = "song_Click(this)" id="${id}" >
    <img  src="${img_source}" >
    <div>
        <h3>${song_name}</h3>
        <p>${singer_name}</p>
    </div>

    </div>` ;

});


let create_Songs_Divs = function(){

store_SongsDiv = ""; 

contents.forEach(function(con_Arr){
store_SongsDiv += song_Div(con_Arr[0],con_Arr[1],con_Arr[2],con_Arr[4]);

});

SONGS_COLLECTION.innerHTML += store_SongsDiv;

create_MovieName_Divs();
create_listenAgain_div();






}; 





// Search page...........


const WHOLE_WRAPPER = document.querySelector(".Whole-Wrapper");
const SEARCH_PAGE = document.querySelector(".Search-page");

const SP_INP = document.querySelector("#SP-inp");
const SEARCHED_SONGS  = document.querySelector(".searched-Songs");

let store_SearchedSongs ;

function Search_bar(){

WHOLE_WRAPPER.style.transition = ".3s"; 
WHOLE_WRAPPER.style.filter="blur(5px)";

WHOLE_WRAPPER.style.zIndex = "1";

SEARCH_PAGE.style.transition = ".5s"
SEARCH_PAGE.style.opacity = "100%";

SP_INP.style.transition = "1s";
SP_INP.style.width = "330px";

SP_INP.focus();


}

function sp_Close(){
WHOLE_WRAPPER.style.transition = ".5s"; 
WHOLE_WRAPPER.style.filter="blur(0px)";

WHOLE_WRAPPER.style.zIndex = "2"; 

SEARCH_PAGE.style.transition = ".3s"
SEARCH_PAGE.style.opacity = "0%";
SP_INP.style.width = "0px";

store_SearchedSongs="";
SP_INP.value = store_SearchedSongs;

}


function typed_Input(){
store_SearchedSongs="";


if(SP_INP.value==""){
store_SearchedSongs="";

}else{

contents.forEach(function(element){
for(let i = 0 ; i < element.length ; i++){
if(element[i].toLowerCase().includes( SP_INP.value.toLowerCase())){
    store_SearchedSongs += song_Div(element[0],element[1],element[2],element[4]);
    break;
}
}
})

}

//  console.log(store_SearchedSongs);
SEARCHED_SONGS.innerHTML = store_SearchedSongs;
}







// Song Playing page.................





let currentSong = 0;
const MUSIC = document.querySelector("#audio");
const VIDEO = document.querySelector("#bg-video");

const SONG_NAME = document.querySelector(".music-name");

const ARTIST_NAME = document.querySelector(".artist-name");
const IMG_DISK = document.querySelector(".img-disk");


const SEEK_BAR = document.querySelector("#seek-bar");

const CURRENT_TIME = document.querySelector(".current-time");
const SONG_DURATION = document.querySelector(".song-duration");

const PLAY_PAUSE_BTN = document.querySelector(".play-Btn");
const BACKWARD_BTN = document.querySelector(".backward-btn");
const FORWARD_BTN = document.querySelector(".forward-btn");




PLAY_PAUSE_BTN.addEventListener('click',()=>{
if(PLAY_PAUSE_BTN.className.includes('pause')){

    if(MUSIC.play()!==undefined){
        MUSIC.play();
    }else{
        // setMusic(nowSelected_Song);
        MUSIC.pause();
    }

VIDEO.play();
}else{
MUSIC.pause();
VIDEO.pause();
}



PLAY_PAUSE_BTN.classList.toggle('pause');
IMG_DISK.classList.toggle('play');


})

var nowSelected_Song;

const setMusic = (arr) =>{

SEEK_BAR.value==0;

MUSIC.src = arr[0][5];
console.log(MUSIC.play());

SONG_NAME.innerText=arr[0][1];
ARTIST_NAME.innerText=arr[0][2];
IMG_DISK.src=arr[0][0]

CURRENT_TIME.innerHTML="00:00";

setTimeout(() =>{

console.log("bef => "+MUSIC.duration);




if(String(MUSIC.duration) != "NaN"){

SEEK_BAR.max = MUSIC.duration;

if (duration_formatTime(MUSIC.duration) != 0 && duration_formatTime(MUSIC.duration) != NaN  && String(duration_formatTime(MUSIC.duration)) != "NaN:NaN" ) {
    
    SONG_DURATION.innerText = duration_formatTime(MUSIC.duration);

    console.log("if in "+SONG_DURATION.innerText);

}else{
    //  setMusic(nowSelected_Song);
    MUSIC.pause();
    }

}else{
    
    setTimeout(()=>{
        SEEK_BAR.max = MUSIC.duration;

if (duration_formatTime(MUSIC.duration) != 0 && duration_formatTime(MUSIC.duration) != NaN  && String(duration_formatTime(MUSIC.duration)) != "NaN:NaN" ) {
    
    SONG_DURATION.innerText = duration_formatTime(MUSIC.duration);

    console.log("if in "+SONG_DURATION.innerText);

}else{
    // setMusic(nowSelected_Song);
    MUSIC.pause();
}
    },1500);

}

},300);

MUSIC.pause();
if(MUSIC.play()!==undefined){
    MUSIC.play();
}else{
    // setMusic(nowSelected_Song);
    MUSIC.pause();
}

}





const formatTime = (time)=>{



    if(time!=0 && time != NaN){

        let min = Math.floor(time/60);
        if(min<10){
        min = `0${min}`;
        }
        let sec = Math.floor(time%60);
        if(sec<10){
        sec = `0${sec}`;
        }
        return `${min}:${sec}`;
        
        }else{
            return '00:00' ;
        }

}

const duration_formatTime = (time)=>{


if(time != NaN){


let min = Math.floor(time/60);
if(min<10){
min = `0${min}`;
}
let sec = Math.floor(time%60);
if(sec<10){
sec = `0${sec}`;
}
return `${min}:${sec}`;

}else{
    return '00:00' ;
}


}







// click the song and playing......................


const SPP = document.querySelector(".Song-Palying-Page");
const SP_CLOSE = document.querySelector("#SPP-close");

let currentMusic ;

function song_Click(song){
currentMusic = Number(song.id);

let selectedSong = contents.filter(function(element){
return element[4] == song.id;
});


SPP.style.zIndex="3";
setTimeout(()=>{
SPP.style.opacity="100%"; 
SPP.style.transition="1s"; 
});



// console.log(currentMusic);
setMusic(selectedSong);
nowSelected_Song = selectedSong;
playingMusic();

}

SP_CLOSE.addEventListener('click',()=>{
//  console.log(currentMusic);

SPP.style.zIndex="0";
setTimeout(()=>{
SPP.style.opacity="0%"; 
SPP.style.transition="1s"; 
});

MUSIC.pause();
VIDEO.pause();

})




FORWARD_BTN.addEventListener('click',()=>{
// console.log(currentMusic);
if(currentMusic <= contents.length-1){
console.log(++currentMusic);
}else{
currentMusic = 1;
}  

let selectedSong = contents.filter(function(element){
return element[4] == currentMusic;
});
// console.log(currentMusic);
setMusic(selectedSong);
nowSelected_Song=selectedSong;
playingMusic();

})  



BACKWARD_BTN.addEventListener('click',()=>{
// console.log(currentMusic);

if(currentMusic >= 2){
console.log(--currentMusic);
}else{
currentMusic = contents.length;
}


let selectedSong = contents.filter(function(element){
return element[4] == currentMusic;
});
// console.log(currentMusic);
setMusic(selectedSong);
nowSelected_Song=selectedSong;
playingMusic();


})





setInterval(()=>{

SEEK_BAR.value = MUSIC.currentTime;
CURRENT_TIME.innerHTML = formatTime(MUSIC.currentTime);



if( ( Math.floor(MUSIC.currentTime) == Math.floor(SEEK_BAR.max) ) && SEEK_BAR.max!=0 ){
FORWARD_BTN.click();
}

},500);







SEEK_BAR.addEventListener('change',()=>{
MUSIC.currentTime = SEEK_BAR.value;
})


const playingMusic = ()=>{
    if(MUSIC.play()!==undefined){
        MUSIC.play();
    }else{
        // setMusic(nowSelected_Song);
        MUSIC.pause();
    }

VIDEO.play();
PLAY_PAUSE_BTN.classList.remove("pause"); 
IMG_DISK.classList.add('play');
}
